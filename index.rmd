---
title: "R Package Development for Research"
subtitle: "_An Introduction_"  
author: 
  - "Valentin Lucet"
date: '`r Sys.Date()`'
output:
  xaringan::moon_reader:
    css: xaringan-themer.css
    nature:
      slideNumberFormat: "%current%"
      highlightStyle: github
      highlightLines: true
      ratio: 4:3
      countIncrementalSlides: true
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(
  fig.width=9, fig.height=3.5, fig.retina=3,
  out.width = "100%",
  cache = FALSE,
  echo = TRUE,
  message = FALSE, 
  warning = FALSE,
  fig.show = TRUE,
  hiline = TRUE
)
```

```{r xaringan-themer, include=FALSE, warning=FALSE}
library(xaringanthemer)
style_mono_accent(
  base_color = "#1c5253",
  title_slide_text_color = "#1c5253",
  header_font_google = google_font("Josefin Sans"),
  text_font_google   = google_font("Montserrat", "300", "300i"),
  code_font_google   = google_font("Fira Mono"),
  title_slide_background_image = "images/title_slide_background.jpeg",
  text_font_size = "1.1em"
)
```

```{r xaringanExtra-allextras, include=FALSE, warning=FALSE, echo=FALSE}
xaringanExtra::use_tile_view()
xaringanExtra::use_share_again()
xaringanExtra::use_broadcast()
xaringanExtra::use_scribble()
xaringanExtra::use_animate_css()
xaringanExtra::use_panelset()
xaringanExtra::use_clipboard()
xaringanExtra::use_fit_screen()
xaringanExtra::use_webcam()
# xaringanExtra::use_animate_all("fade")
```

name: self-intro
## About me

<img align="right" width="210" height="210" alt="a picture of Val" src="images/val.jpeg">

 * __RSE__ at __Concordia University__ (lab of Dr. Eric Pedersen)
 
 * __Data Scientist__ at __Environment Canada (ECCC)__ (Landscape Science Unit)
 
 * Have been coding in R for ~ 7-8 years
 
 * Maintaining 4 packages (2 on CRAN), contributed to 3 other
 
 * B.Sc. (Hons) & M.Sc. McGill University (Biology)
 
 * Website: [___vlucet.github.io___](https://vlucet.github.io/)

---
name: plan 1
## Workshop: Part 1 (now ~ 10:30)

<!-- 9:30 - 9:35 : let people trickle in -->
<!-- 9:35 - 9:40 : personal introduction -->

1. __Research software in Eco-Evo__ (__~ 10 minutes__) <!-- 9:40 - 9:50 -->
  * What is research software?
  * To Package or not to Package: what are the alternatives?
    
2. __Design patterns: the "tooling" vs "workflow" paradigms__ (__~ 10 minutes__) <!-- 9:50 - 10:00 -->
  * General vs workflow oriented packaging.
  * Object-oriented designs and functional programming.
  
3. __From "spaghetti code" to "packaged" code__ (__~ 20 minutes__) <!-- 10:00 - 10:20 -->
  * Tips and tricks to modularize your research code.
  * How to write clean code.
  
(_Break: 10 minutes_) <!-- 10:20 - 10:30 -->

---
name: plan 2
## Workshop: Part 2 & 3 (10:30 ~ 12:30)

4. __Your personal assistants: `usethis` and `devtools`__ (__~ 50 minutes__) <!-- 10:30 - 11:20 -->
  * Let's create an example package step by step.
  * (__Break: 10 minutes__) <!-- 11:20 - 11:30 -->
5. __Package testing, maintenance and distribution: best practices__ (__~ 50 minutes__) <!-- 11:30 - 12:20 -->
  * How to test, maintain, and distribute your package.

__Q & A__: __~ 10 minutes__ (or on the conference app at any time) 

![XKCD comic. Two characters. Character 1 says what they are trying to do on the computer shouldn't be too hard. Character 2 says that computers are just "organized sand" and that everything is hard untol someone makes it easy". Character 2 decides to turns the computer back to sand and character 2 says they'll get a blowtorch! ](https://imgs.xkcd.com/comics/shouldnt_be_hard.png)
---
name: prereqs

# Before we get started...

For today, it is recommended that you are already pretty well acquainted with __R__ and __Rstudio__. But, if at least you...
  * Have written a few __functions with multiple arguments__ in R 
  * Know about "__project oriented workflow__" (for instance you use RStudio projects) 
  
...then you have the bare minimum we need for today!

Knowledge of Git/Github is also welcome as I won't have the time to explain version control software.

```{r, eval = FALSE}
# Run this in R before we start. 
pkgs <- c("devtools", "roxygen2", "usethis")
install.packages(pkgs)
```

_Note: the first part of the workshop is relevant to users of any level._

---
class: inverse center middle

# Research software in Eco-Evo 

---
class: inverse center middle

# Design patterns: "tooling" vs "workflow"

---
class: inverse center middle

# From "spaghetti code" to "packaged" code 

---
class: inverse center middle

# A package step by step with {usethis} and {devtools}

---
class: inverse center middle

# Package testing, maintenance and distribution: best practices

---
class: center, middle

# Thanks!

Slides created via the R packages:

[**xaringan**](https://github.com/yihui/xaringan)<br>
[gadenbuie/xaringanthemer](https://github.com/gadenbuie/xaringanthemer)
